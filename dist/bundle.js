(()=>{"use strict";var e,t,n,a,r,o,l,c,u,i,s,d,m,v,g,f,p,h,y,E,S,q,L,b,A,I,x,B,C,k,w,j,D,T,M,$,F,_,z,O;M=document.querySelector("#timer-hours"),$=document.querySelector("#timer-minutes"),F=document.querySelector("#timer-seconds"),_=0,z=function(e){return 1===String(e).length?"0"+e:String(e)},(O=function(){var e,t,n,a,r=(t=0,n=0,a=0,(e=(new Date(void 0).getTime()-(new Date).getTime())/1e3)>0&&(t=Math.floor(e%60),n=Math.floor(e/60%60),a=Math.floor(e/60/60)),{timeRemaining:e,hours:a,minutes:n,seconds:t});M.textContent=z(r.hours),$.textContent=z(r.minutes),F.textContent=z(r.seconds),r.timeRemaining<0&&clearInterval(_)})(),_=setInterval(O,1e3),(T=document.querySelector(".scroll")).addEventListener("click",(function(e){e.preventDefault();var t=T.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})})),document.body.addEventListener("click",(function(e){var t=e.target;(t.closest(".menu")||!t.closest("menu")&&document.querySelector("menu").classList.contains("active-menu")||t.closest("menu")&&t.closest('[href^="#"]'))&&document.querySelector("menu").classList.toggle("active-menu")})),C=document.querySelector(".popup"),k=document.querySelectorAll(".popup-btn"),w=document.querySelector(".popup-content"),j={count:-500,speed:8,start:-500,end:0},D=function e(){j.start>j.end?j.count-=j.speed:j.count+=j.speed,w.style.transform="translate(".concat(j.count,"px)"),(j.start>j.end?j.count>j.end:j.count<j.end)&&requestAnimationFrame(e)},k.forEach((function(e){e.addEventListener("click",(function(){C.style.display="block",screen.width>768?(j.count=j.start,requestAnimationFrame(D)):(j.start=0,j.count=0)}))})),C.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?C.style.display="none":(t=t.closest(".popup-content"))||(C.style.display="none",document.getElementById("form3").reset())})),I=document.querySelector(".service-header"),x=I.querySelectorAll(".service-header-tab"),B=document.querySelectorAll(".service-tab"),I.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&x.forEach((function(e,n){e===t&&function(e){for(var t=0;t<B.length;t++)e===t?(x[t].classList.add("active"),B[t].classList.remove("d-none")):(x[t].classList.remove("active"),B[t].classList.add("d-none"))}(n)}))})),b=document.querySelectorAll(".portfolio-item"),A=document.querySelector(".portfolio-dots"),b.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),A.appendChild(e)})),A.children[0].classList.add("dot-active"),f=document.querySelectorAll(".portfolio-item"),p=document.querySelectorAll(".dot"),h=document.querySelector(".portfolio-content"),y=0,E=function(e,t,n){e[t].classList.remove(n)},S=function(e,t,n){e[t].classList.add(n)},q=function(){E(f,y,"portfolio-item-active"),E(p,y,"dot-active"),++y>=f.length&&(y=0),S(f,y,"portfolio-item-active"),S(p,y,"dot-active")},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;g=setInterval(q,e)},h.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(E(f,y,"portfolio-item-active"),E(p,y,"dot-active"),t.matches(".next")?y++:t.matches(".prev")?y--:t.matches(".dot")&&p.forEach((function(e,n){e===t&&(y=n)})),y>=f.length&&(y=0),y<0&&(y=f.length-1),S(f,y,"portfolio-item-active"),S(p,y,"dot-active"))})),h.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(g)})),h.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&L()})),L(1500),document.querySelectorAll(".command__photo").forEach((function(e){e.addEventListener("mouseenter",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t})),e.addEventListener("mouseleave",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),document.querySelectorAll("input.calc-item").forEach((function(e){e.addEventListener("input",(function(){this.value=this.value.replace(/[^\d]/g,"")}))})),t=document.querySelector(".mess"),n=document.getElementById("form1-name"),a=document.getElementById("form1-email"),r=document.getElementById("form1-phone"),o=document.getElementById("form2-name"),l=document.getElementById("form2-email"),c=document.getElementById("form2-phone"),u=document.getElementById("form3-name"),i=document.getElementById("form3-email"),s=document.getElementById("form3-phone"),d=function(e){e.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/( \s+)(^\s*$)/gi,""),e.target.value=e.target.value.split(" ").filter((function(e){return e})).join(" "),e.target.value=e.target.value.replaceAll(e.target.value.match(/-+/),"-"),e.target.value=e.target.value.replaceAll(e.target.value.match(/ +/)," ")})),e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^+\d () -]/g,"")}))},m=function(e){e.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/( \s+)(^\s*$)/gi,""),e.target.value=e.target.value.split(" ").filter((function(e){return e})).join(" "),e.target.value=e.target.value.replaceAll(e.target.value.match(/-+/),"-"),e.target.value=e.target.value.replaceAll(e.target.value.match(/ +/)," ")})),e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^a-z@-_.!~*']/gi,"")}))},v=function(e){e.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/( \s+)(^\s*$)/gi,""),e.target.value=e.target.value.split(" ").filter((function(e){return e})).join(" "),e.target.value=e.target.value.replaceAll(e.target.value.match(/-+/),"-"),e.target.value=e.target.value.replaceAll(e.target.value.match(/ +/)," "),e.target.value&&(e.target.value=e.target.value.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "))})),e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^а-яё -]/gi,"")}))},t.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/( \s+)(^\s*$)/gi,""),e.target.value=e.target.value.split(" ").filter((function(e){return e})).join(" "),e.target.value=e.target.value.replaceAll(e.target.value.match(/-+/),"-"),e.target.value=e.target.value.replaceAll(e.target.value.match(/ +/)," ")})),t.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/[^а-яё -,.:;()!?"]/gi,"")})),v(n),v(o),v(u),m(a),m(l),m(i),d(r),d(c),d(s),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),o=document.querySelector(".calc-count"),l=document.getElementById("total"),c=function(){var t=0,c=1,u=1,i=n.options[n.selectedIndex].value,s=+a.value;console.log(i),o.value>1&&(c+=(o.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value<10&&(u*=1.5),i&&s&&(t=Math.floor(e*i*s*c*u)),l.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&c()}))}(100),(e=function(e){var t=document.getElementById(e),n=document.createElement("div");n.style.cssText="font-size: 2rem; color: #fff",t.appendChild(n),t.addEventListener("submit",(function(a){a.preventDefault();var r=function(e){var t=e.querySelector(".form-name"),n=e.querySelector(".form-email"),a=e.querySelector(".form-phone"),r=[];return t.value.length<2?r.push("Имя должно быть больше 2 символов"):n.value.length<4?r.push("Неправильно введен email"):(a.value.length<6||a.value.length>13)&&r.push("Телефон может быть не короче 6 и не больше 13 символов"),r}(t);if(0===r.length){var o=new FormData(t),l={};n.textContent="Загрузка...",o.forEach((function(e,t){l[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(l).then((function(t){if(200!==t.status)throw new Error("status network not 200");n.textContent="Спасибо! Мы с вами свяжемся!",document.getElementById(e).reset()})).catch((function(e){console.error(e),n.textContent="Что то пошло не так..."}))}else n.textContent=r[0],setTimeout((function(){n.textContent=""}),3e3)}))})("form1"),e("form2"),e("form3")})();